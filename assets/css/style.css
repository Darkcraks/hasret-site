/* Base Reset */
* { box-sizing: border-box; }
html, body { margin:0; padding:0; }
body {
	font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
	background: radial-gradient(circle at 30% 20%, #ffdde1, #ee9ca7 60%, #e55d87);
	min-height: 100dvh;
	-webkit-font-smoothing: antialiased;
	color:#422;
	overflow-x:hidden;
}

:root {
	--pink:#ff6fa5;
	--pink-dark:#d94b7b;
	--bg-panel:rgba(255,255,255,0.75);
	--bg-blur:10px;
	--radius:26px;
	--gradient:linear-gradient(135deg,#ff9ac6,#ff6fa5 40%,#ff4e8e);
	--shadow:0 4px 12px -2px rgba(255,56,120,.35),0 8px 28px -4px rgba(0,0,0,.15);
	--focus:0 0 0 3px rgba(255,111,165,.5);
}

canvas#hearts-bg { position:fixed; inset:0; width:100%; height:100%; z-index:-1; }

.app-wrapper { width:100%; max-width:860px; margin:0 auto; padding:clamp(1rem,2vw,2rem); }

.panel {
	display:none;
	background:var(--bg-panel);
	backdrop-filter: blur(var(--bg-blur));
	-webkit-backdrop-filter: blur(var(--bg-blur));
	padding:clamp(1.5rem,3vw,3rem) clamp(1.2rem,2.5vw,2.4rem) clamp(2rem,3vw,3rem);
	border-radius:var(--radius);
	box-shadow:var(--shadow);
	animation: fadeSlide .7s cubic-bezier(.25,.8,.25,1);
	position:relative;
}
.panel.active { display:block; }

@keyframes fadeSlide { from { opacity:0; transform:translateY(25px) scale(.98); } }

h1,h2 { margin:0 0 1rem; line-height:1.15; }
h1 { font-size:clamp(2.2rem,6vw,3.5rem); font-family:'Great Vibes',cursive; color:#c32764; text-shadow:0 3px 8px rgba(0,0,0,.15); }
h2 { font-size:clamp(1.6rem,4.5vw,2.4rem); font-weight:600; color:#bb215e; }

.script-title { text-align:center; }

p { line-height:1.6; font-size:1.05rem; }

.letter { font-size:1.1rem; min-height:180px; white-space:pre-wrap; }
.typewriter { border-left:3px solid #ff7cab; padding-left:1rem; animation: caret 1s steps(1) infinite; }
@keyframes caret { 50% { border-color:transparent; } }

.btn { --btn-bg:var(--gradient); --btn-fg:#fff; cursor:pointer; border:none; font:600 1rem/1 'Poppins',sans-serif; padding:.85rem 1.4rem; border-radius:999px; display:inline-flex; gap:.5rem; align-items:center; justify-content:center; letter-spacing:.5px; position:relative; overflow:hidden; transition:.35s ease; text-decoration:none; }
.btn.primary { background:var(--btn-bg); color:var(--btn-fg); box-shadow:0 8px 18px -6px rgba(255,56,120,.45); }
.btn.primary:hover { transform:translateY(-2px); box-shadow:0 14px 32px -8px rgba(255,56,120,.55); }
.btn.primary:active { transform:translateY(1px); }
.btn.ghost { background:rgba(255,255,255,.6); color:#b01c58; box-shadow:0 4px 10px -4px rgba(0,0,0,.25); }
.btn.ghost:hover { background:rgba(255,255,255,.85); }
.btn.yes { background:linear-gradient(135deg,#ff89ba,#ff2f80); color:#fff; font-size:1.15rem; padding:1rem 2rem; }
.btn.no { background:#fff; color:#ff2f80; border:2px solid #ff2f80; font-weight:600; }
.btn.no:hover { background:#ff2f80; color:#fff; }

.btn:focus-visible { outline:none; box-shadow:var(--focus); }

.answer-buttons { position:relative; display:flex; gap:1.2rem; flex-wrap:wrap; justify-content:center; margin:2rem 0 1rem; min-height:120px; }

.hint { font-size:.85rem; opacity:.7; text-align:center; }

.carousel { position:relative; min-height:180px; display:flex; align-items:center; justify-content:center; text-align:center; padding:1rem; font-size:1.2rem; font-weight:500; }
.fade-out { opacity:0 !important; transition:opacity .25s ease; }
.fade-in { animation: fadeIn .45s ease; }
@keyframes fadeIn { from { opacity:0; transform:translateY(6px);} }
.carousel-controls { display:flex; justify-content:center; gap:.75rem; margin-bottom:1.5rem; }

.game-tabs { display:flex; gap:.6rem; margin-bottom:1rem; flex-wrap:wrap; }
.tab { background:rgba(255,255,255,.6); border:none; padding:.6rem 1.2rem; border-radius:999px; cursor:pointer; font-weight:500; color:#a01854; transition:.3s; }
.tab.active { background:linear-gradient(135deg,#ff9ac6,#ff5d9d); color:#fff; box-shadow:0 6px 18px -6px rgba(255,56,120,.4); }
.tab:focus-visible { outline:none; box-shadow:var(--focus); }

.games { position:relative; }
.game { display:none; animation: fadeSlide .5s ease; }
.game.active { display:block; }

/* Heart Hunt Game */
.heart-game-area { position:relative; min-height:240px; background:rgba(255,255,255,.55); border-radius:18px; overflow:hidden; border:2px dashed #ff91c1; }
.heart-game-area .heart { position:absolute; font-size:clamp(1.3rem,4vw,2.2rem); cursor:pointer; animation: popIn .4s ease; user-select:none; }
@keyframes popIn { from { transform:scale(.4) rotate(-30deg); opacity:0; } }

/* Memory */
.memory-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(72px,1fr)); gap:.6rem; margin-top:.8rem; }
.memory-card { position:relative; width:100%; aspect-ratio:3/4; perspective:800px; cursor:pointer; }
.memory-inner { position:absolute; inset:0; transform-style:preserve-3d; transition:transform .6s; border-radius:14px; }
.memory-card.flipped .memory-inner, .memory-card.matched .memory-inner { transform:rotateY(180deg); }
.memory-face { position:absolute; inset:0; backface-visibility:hidden; display:flex; align-items:center; justify-content:center; border-radius:14px; font-size:1.8rem; font-weight:600; }
.memory-face.front { background:linear-gradient(135deg,#fff,#ffe3ef); border:2px solid #ffc5dd; }
.memory-face.back { background:linear-gradient(135deg,#ff77b2,#ff2f80); color:#fff; transform:rotateY(180deg); box-shadow:0 8px 14px -6px rgba(255,56,120,.45); }
.memory-card.matched .memory-face.back { animation: pulse .9s ease 1; }
@keyframes pulse { 50% { transform:rotateY(180deg) scale(1.08); } }

.memory-status { margin-top:.6rem; font-size:.95rem; font-weight:500; color:#97204e; }

.game-actions { margin:1.4rem 0 .5rem; display:flex; gap:.8rem; }

.pulse { animation: askPulse 1.4s ease-in-out infinite; }
@keyframes askPulse { 50% { transform:scale(1.04); } }

.celebrate { animation: celebrate 1.2s ease forwards; }
@keyframes celebrate { from { opacity:0; transform:translateY(25px) scale(.92); } }

.capture-preview { margin-top:1rem; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:1rem; }
.capture-preview canvas, .capture-preview img { max-width:100%; border-radius:18px; box-shadow:0 12px 28px -10px rgba(255,56,120,.45),0 4px 14px -6px rgba(0,0,0,.3); }

.broken { text-decoration:line-through wavy #ff2f80; }

/* Utility */
[data-next], [data-restart] { margin-top:1.5rem; }

/* Responsive tweaks */
@media (max-width:620px) {
	.panel { padding:1.25rem 1rem 2rem; }
	.memory-grid { grid-template-columns:repeat(auto-fill,minmax(64px,1fr)); }
	.btn { padding:.75rem 1.15rem; }
	h1 { font-size:2.65rem; }
	h2 { font-size:1.7rem; }
}

@media (prefers-reduced-motion: reduce) {
	* { animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; }
}

/* Accessibility helpers */
.sr-only { position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }

